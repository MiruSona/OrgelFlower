# OrgelFlower

## 프로젝트 설명
* GGJ 2017(Global Game Jam) 에서 제작한 게임 'Blind Cave'를 발전시켜 만든 게임
* 오르골 소리가 나는 특별한 세 종류의 꽃으로 시야를 밝히고 퍼즐을 풀어나가는 어드벤쳐 퍼즐 게임
* 12월 28일 ~ 31일 '서울 일러스트레이션 페어'에 참여

## 영상(이미지 클릭 시 유투브로 이동)
[![OrgelFlower](https://img.youtube.com/vi/k5UtABq5zgo/0.jpg)](https://youtu.be/k5UtABq5zgo "OrgelFlower")

## 개발환경
* Unity 2018.2.0f2
* 안드로이드(모바일)

## 프로젝트 팀원 및 역할
* 그래픽 2인, 기획 1인, 프로그래머 1인
* 나의 역할 : 프로그래머

## 개발 기능
* EchoSystem
	* 이 퍼즐 게임의 핵심 기능
	* 인게임에서 시야를 밝히거나 특정 기믹들과 상호작용 할 수 있는 시스템
	* 플레이어가 꽃을 획득 -> 꽃을 소모해 EchoEffect 발동 -> EchoEffect를 통해 상호작용
	* EchoEffect 이용 방식은 아래와 같다
		* EchoSystem이 EchoEffect 풀(배열)을 미리 생성 -> 3종류의 색 별로 생성
		* 인게임 객체가 EchoSystem에 EchoEffect를 요청(파라미터로 색,위치,크기,충돌체크여부 등을 보낼 수 있음)
		* EchoSystem이 요청받은 색의 EchoEffect 풀에서 비활성화된 EchoEffect를 찾음
		* 해당 EchoEffect 활성화 및 파라미터 반영
* EchoEffect
	* 이 게임의 기믹과 다양한 상호작용을 할 수 있게 해주는 객체
	* 노랑, 파랑, 빨강의 색값 enum의 형태로 가지고 있다
	* 기본적으로 시야를 밝혀주고 원이 퍼져나가는 이펙트(소리를 표현)를 가짐
		* 시야를 밝혀주는 이펙트 : BlindCave에서 가져온 Shader 및 C# 스크립트를 개량
		* 원이 퍼지는 이펙트 : 파티클시스템 사용
	* 충돌체크 컴포넌트가 원의 크기에 따라 커짐
	* EchoEffect와 상호작용하는 객체는 FlowerListener를 통해 인식 가능
* FlowerListener & FlowerListenerMulti
	* EchoEffect를 인식하게 해주는 컴포넌트
	* 작동 방식
		* 인식하길 원하는 색상을 변수 설정
		* Multi의 경우 인식가능한 색상을 여러개 지정 가능
		* 원하는 색상이 인식되면 일정 시간동안 active 변수를 true로 해줌
		* active 되있는 동안 이 컴포넌트가 달린 오브젝트가 행동함(움직이는 블럭, 사라지는 블럭 등)
* 플레이어
	* 기본 이동 : UI의 방향 화살표 터치 시 이동
	* 꽃 사용
		* 원하는 색의 꽃 버튼을 터치 시 꽃을 사용함
		* 꽃 버튼을 길게 누르면 일정 간격으로 계속 사용
		* 꽃을 사용할 때마다 꽃잎이 하나씩 사라진다
		* 모든 꽃잎이 사라지면 사용 불가
		* 꽃을 사용 시 EchoEffect가 플레이어 위치로 활성화 된다
* 꽃
	* 플레이어에게 닿으면 꽃을 충전해준다
	* 기본적인 꽃은 한번 닿으면 사라진다
	* 꽃밭의 경우 횟수에 상관없이 충전해준다
* 상호작용 블럭
	* 모든 상호작용 블럭은 특정 색상의 EchoEffect를 인식하면 작동한다
	* 움직이는 블럭
		* 노란색을 인식하면 목표지점까지 움직이는 블럭
		* 변수 값에 따라 일정시간 활성화, 끝에 도달 시 시작지점으로 다시 이동 등을 설정 가능\
		* 하위 오브젝트로 Point가 있으며, Point 객체를 따라서 이동한다(여러개 생성 가능)
	* 사라지는 블럭
		* 파란색을 인식하면 투명해지고 충돌이 안되는 블럭
		* 인식 후 일정시간이 지나면 다시 불투명해지고 충돌체크가 활성화된다
	* 나타나는 블럭
		* 빨간색을 인식하면 불투명해지고 충돌이 가능해지는 블럭
		* 인식 후 일정시간이 지나면 다시 투명해지고 충돌체크가 비활성화됨
	* 카멜레온 블럭
		* 파랑을 인식하면 투명하게, 빨강을 인식하면 불투명 해지는 블럭
		* 투명해지면 충돌체크가 비활성화되며, 불투명해지면 충돌체크가 활성화 된다
	* 점프 블럭
		* 파랑 또는 빨강을 인식하면 활성화 된다.
		* 파랑을 인식하면 조금 점프, 빨강을 인식하면 많이 점프시켜주는 블럭이 된다
	* 파워 블럭
		* 아무 색의 EchoEffect를 인식하면 목표지점까지 EchoEffect를 반복해서 발동해주는 블럭
		* 멀리 떨어져 있는 블럭을 활성화 하는 용도로 사용